<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>医院感染信息监测系统</title>
		<!-- Tell the browser to be responsive to screen width -->
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<!-- Bootstrap 3.3.7 -->
		<link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.min.css">
		<!-- Ionicons -->
		<link rel="stylesheet" href="/bower_components/Ionicons/css/ionicons.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="/dist/css/AdminLTE.min.css">
		<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
		<link rel="stylesheet" href="/dist/css/skins/_all-skins.min.css">
		<!-- Morris chart -->
		<link rel="stylesheet" href="/bower_components/morris.js/morris.css">
		<!-- jvectormap -->
		<link rel="stylesheet" href="/bower_components/jvectormap/jquery-jvectormap.css">
		<!-- daterange picker -->
		<link rel="stylesheet" href="/bower_components/bootstrap-daterangepicker/daterangepicker.css">
		<!-- bootstrap datepicker -->
		<link rel="stylesheet" href="/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
		<!-- iCheck for checkboxes and radio inputs -->
		<link rel="stylesheet" href="/plugins/iCheck/all.css">
		<!-- Bootstrap Color Picker -->
		<link rel="stylesheet" href="/bower_components/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">
		<!-- Bootstrap time Picker -->
		<link rel="stylesheet" href="/plugins/timepicker/bootstrap-timepicker.min.css">
		<!-- Select2 -->
		<link rel="stylesheet" href="/bower_components/select2/dist/css/select2.min.css">
		<!-- bootstrap wysihtml5 - text editor -->
		<link rel="stylesheet" href="/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">

		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<script src="/js/jquery-3.3.1.min.js"></script>
		<script src="/js/vue.min.js"></script>
		<script src="/js/axios.js"></script>
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
	<style type="text/css">
		th{
			text-align: center;
			font-size: 16px;
		}
		/*动画加载*/
		.loading {
			position: fixed;
			left: 0;
			top: 0;
			/*background: url('/img/three-dots.svg') center center no-repeat #fff;*/
			background-color: white;
			width: 100vw;
			height: 100vh;
			z-index: 1000;
			/*opacity: 0.8;*/
		}

		.main {
            height: 100px;
            width: 100px;
            margin: 200px auto
        }
		.main div {
			color: #799761;
			margin: 50px auto;
		}
		svg {
			fill:none
		}
		.load{
			stroke-width: 15px;
			stroke-dasharray: 252;
			stroke-dashoffset: 0;
			animation: load 1.5s ease-in-out infinite;
			transform-origin: center center

		}
		.one{
			stroke: #b8d8d7;
		}
		.two{
			stroke: #73c0b0;
			animation-delay: 0.1s;
		}
		.three{
			stroke: #4d8f8e;
			animation-delay: 0.2s
		}
		@keyframes load {
			0%,100% {
				stroke-dashoffset: 252
			}
			50% {
				stroke-dashoffset: 230
			}
			100% {
				transform:rotate(360deg)
			}
		}
		.jump{
			animation: jump 0.5s ease-in-out infinite
		}
		.first{
			fill: #b8d8d7;
		}
		.second {
			fill:#73c0b0;
			animation-delay: 0.1s;
		}
		.third{
			fill:#4d8f8e;
			animation-delay: 0.2s;
		}
		@keyframes jump{
			0% ,100%{
				transform: translateY(0)
			}
			50% {
				transform: translateY(-10px)
			}
		}
		/*.main-header{
			max-height: 200px;
			height: 100px;
		}
		.main-header .navbar{
			height: 100px;
		}
		.main-header .logo{
			height: 100px;
		}
		.main-sidebar{
			top: 50px;
		}
		.navbar-custom-menu{
			position: absolute;
			right: 0;
			top: 20px;
			height: 100px;
			text-align: center;
		}*/
		.active{
			background-color: grey;
		}
	</style>
	</head>
	<body class="hold-transition skin-blue sidebar-mini">
		<div class="wrapper" id="dcims">

			<header class="main-header">
				<!-- Logo -->
				<a href="#" class="logo">
					<!-- mini logo for sidebar mini 50x50 pixels -->
					<span class="logo-mini"><b>H</b>IS</span>
					<!-- logo for regular state and mobile devices -->
					<span class="logo-lg">感染信息监测系统</span>
				</a>
				<!-- Header Navbar: style can be found in header.less -->
				<nav class="navbar navbar-static-top">
					<!-- Sidebar toggle button-->
					<div class="navbar-custom-menu">
						<ul class="nav navbar-nav">
							<!-- Messages: style can be found in dropdown.less-->
							<li class="dropdown messages-menu">
								<a href="/pages/index.html">首页</a>
							</li>
							<li class="dropdown messages-menu">
								<a href="/pages/user/collect_reportCard.html">收集报卡</a>
							</li>
							<!--<li class="dropdown messages-menu">
								<a href="/pages/user/ward_info.html">病区概况</a>
							</li>-->
							<li class="dropdown messages-menu">
								<a href="/pages/user/zhinengshaicha.jsp">智能筛查</a>
							</li>
							<li class="dropdown messages-menu active">
								<a href="/pages/user/patients.html">数据查询</a>
							</li>
							<li class="dropdown messages-menu" @click="logout">
								<a href="#">退出</a>
							</li>

							<li class="dropdown user user-menu">
								<a href="#">
									<img src="/dist/img/avatar5.png" class="user-image" alt="User Image">
									<span class="hidden-xs">{{user.name}}</span>
								</a>
							</li>
						</ul>
					</div>
				</nav>
			</header>
			<!-- Left side column. contains the logo and sidebar -->
			<aside class="main-sidebar">
				<!-- sidebar: style can be found in sidebar.less -->
				<section class="sidebar">
					<!-- sidebar menu: : style can be found in sidebar.less -->
					<ul class="sidebar-menu" data-widget="tree">
						<li class="header">
							<h4>数据查询</h4>
						</li>
						<li class="treeview">
							<a href="patients.html">
								<i class="fa fa-heartbeat"></i>
								<span>病人信息查询</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-left pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="patients.html" >病人信息查询</a></li>
							</ul>
						</li>
						<!--<li class="treeview">
							<a href="data-search-yisibaofa.html">
								<i class="fa fa-pie-chart"></i>
								<span>疑似爆发查询</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-left pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="data-search-yisibaofa.html">疑似爆发查询</a></li>
							</ul>
						</li>-->
						<!--<li class="treeview">
							<a href="data-search-mubiaojiance.html">
								<i class="fa fa-bug"></i>
								<span>多重耐药查询</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-left pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="data-search-mubiaojiance.html">目标监测漏报查询</a></li>
							</ul>
						</li>-->
						<li class="treeview active">
							<a href="ICU.html">
								<i class="fa fa-medkit"></i>
								<span>病人感染监测</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-left pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu active">
								<li  class="active"><a href="ICU.html">感染监测</a></li>
							</ul>
						</li>
						<li class="treeview">
							<a href="shoushuhuifang.html">
								<i class="fa fa-hand-stop-o"></i>
								<span>手术监测</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-left pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="shoushuhuifang.html">手术回访查询</a></li>
								<li><a href="operations.html">病人手术查询</a></li>
							</ul>
						</li>
					</ul>
				</section>
				<!-- /.sidebar -->
			</aside>

			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper">
				<!-- Content Header (Page header) -->
				<section class="content-header">
					<h1>
						<small></small>
					</h1>
					<ol class="breadcrumb">
						<li>位置：</li>
						<li>数据查询</li>
						<li>病人感染监测</li>
						<li>感染监测</li>
					</ol>
				</section>

				<!-- Main content -->
				<section class="content">
					<div   v-if="isLoading" class="loading">
						<div class="main">
							<svg viewBox="0 0 120 120">
								<circle class="load one" cx="60" cy="60" r="40"></circle>
								<circle class="load two" cx="60" cy="60" r="40"></circle>
								<circle class="load three" cx="60" cy="60" r="40"></circle>
								<circle class="jump first" cx="45" cy="60" r="5"></circle>
								<circle class="jump second" cx="60" cy="60" r="5"></circle>
								<circle class="jump third" cx="75" cy="60" r="5"></circle>
							</svg>
						</div>
					</div>
					<div class="box box-default">
						<div class="box-header with-border bg-aqua">
							<h3 class="box-title"><i class="fa fa-file-text-o"></i>&nbsp;&nbsp;ICU感染监测</h3>
						</div>
						<!-- /.box-header -->
						<div class="box-body">
							<div class="row ">
								<div class="col-md-8">
									<div class="col-md-2">
										<div class="form-group">
											<label>统计类型</label>
											<select class="form-control" v-model="YMD" @change="YMDSelected">
												<option value="year">年</option>
												<option value="month">月</option>
												<option value="day">日</option>
											</select>
										</div>
									</div>
									<!-- /.col (left) -->
									<div class="col-md-6">
										<!-- Date range -->
										<div class="form-group">
											&nbsp;&nbsp;&nbsp;&nbsp;<label>统计日期</label>
											<div class="input-group">
												<div class="col-xs-4">
													<el-input style="width: 80px" type="number" v-model="year"></el-input>
												</div>

												<div class="col-xs-4" v-show="show.month">
													<el-select v-model="month">
														<el-option
																v-for="item in 12"
																:key="item"
																:value="item">
														</el-option>
													</el-select>
													<!--<select class="form-control col-xs-2" v-model="month"  @change="MSelected">
														<option :value="item" v-for="item of 12">{{item}}</option>
													</select>
-->
												</div>

												<div class="col-xs-4" v-show="show.day">
													<el-select v-model="day">
														<el-option
																v-for="item in days"
																:key="item"
																:value="item">
														</el-option>
													</el-select>
													<!--<select class="form-control col-xs-2" v-model="day" >
														<option :value="item" v-for="item of days">{{item}}</option>
													</select>-->
												</div>

											</div>
											<!-- /.input group -->
										</div>
										<!-- /.box -->
									</div>
									<!-- /.col (right) -->
									<div class="col-md-2">
										<div class="form-group">
											<label>本院科室</label>
											<select class="form-control" class="col-xs-2" v-model="departmentNo">
												<option value="0">全部</option>
												<option :value="item.departmentNo" v-for="item in departments">{{item.departmentName}}</option>

											</select>
										</div>
									</div>
									<div class="col-md-2">
										<div class="form-group">
											<label>感染类型</label>
											<select class="form-control" class="col-xs-2" v-model="type">
												<option value="0">全部</option>
												<option :value="item.infectionTypeNo" v-for="item in infections">{{item.infectionTypeName}}</option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-2"></div>
								<div class="col-md-2 ">
									<div class="form-group">
										<label></label>
										<div class="input-group">
											<button type="button" class="btn btn-primary bg-aqua" @click="look">查询(F)</button>
											<button type="button" class="btn btn-primary bg-aqua" @click="download">导出(E)</button>
											<button type="button" class="btn btn-primary bg-aqua" @click="print">打印(P)</button>
										</div>
									</div>
								</div>
							</div>

						</div>

					</div>
					<!-- /.box -->
					<div class="box" id="tableData">
						<div class="box-header with-border" style="text-align: center;">
							<lable style="font-size: 30px;font-weight: bold;">{{icuCheckShow.title}}</lable>
						</div>
						<div class="box-header with-border">
							<h3 class="box-title">{{icuCheckShow.content1}}</h3>
						</div>
						<div class="box-header with-border">
							<h3 class="box-title">{{icuCheckShow.content2}}</h3>
						</div>
						<div class="box-body with-border">
							<table   border="1" width="100%" style="text-align: center;">
								<thead>
									<tr >
										<th>监测指标</th>
										<th>{{icuCheckShow.tableTitle2}}</th>
										<th>{{icuCheckShow.tableTitle3}}</th>
										<th colspan="2">增减情况</th>
										<th>去年同期</th>
										<th colspan="2">增减情况</th>
									</tr>
								</thead>
								<tbody>
								<tr v-for="item in tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)">
									<td v-for="item1 in item">
										<span v-if="item1=='-'"><font color="black">↓</font></span>
										<span v-else-if="item1=='+'"><font color="red">↑</font></span>
										<span v-else>{{item1 | numFilter}}</span>
									</td>
								</tr>
								</tbody>
							</table>
							<div style="text-align: center;margin-top: 30px;">
								<el-pagination
										:page-size="12"
										background
										layout="prev, pager, next"
										:total="total"
										@current-change="current_change">
								</el-pagination>
							</div>
						</div>
						<div class="box-footer">
							<div class="col-md-3">制表人：{{user.name}}</div>
							<div class="col-md-6">制表日期：{{nowDate}}</div>
							<div class="col-md-3">第{{currentPage}}页&nbsp;&nbsp;共{{pages}}页</div>
						</div>
					</div>
				</section>
				<!-- /.content -->
			</div>
			<!-- /.content-wrapper -->
			<footer class="main-footer">
				<div class="pull-right hidden-xs">
					<!--<b>医疗机构：</b>-->
					&nbsp;&nbsp;<b>当前操作员：</b>{{user.name}}&nbsp;&nbsp; <b>上次预警刷新时间：</b>{{nowDate}}
				</div>
				<strong></strong>
			</footer>
		</div>
		<!-- ./wrapper -->

		<!-- jQuery 3 -->
		<script src="/bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap 3.3.7 -->
		<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<!-- Select2 -->
		<script src="/bower_components/select2/dist/js/select2.full.min.js"></script>
		<!-- InputMask -->
		<script src="/plugins/input-mask/jquery.inputmask.js"></script>
		<script src="/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
		<script src="/plugins/input-mask/jquery.inputmask.extensions.js"></script>
		<!-- date-range-picker -->
		<script src="/bower_components/moment/min/moment.min.js"></script>
		<script src="/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
		<!-- bootstrap datepicker -->
		<script src="/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
		<!-- bootstrap color picker -->
		<script src="/bower_components/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
		<!-- bootstrap time picker -->
		<script src="/plugins/timepicker/bootstrap-timepicker.min.js"></script>
		<!-- SlimScroll -->
		<script src="/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
		<!-- iCheck 1.0.1 -->
		<script src="/plugins/iCheck/icheck.min.js"></script>
		<!-- FastClick -->
		<script src="/bower_components/fastclick/lib/fastclick.js"></script>
		<!-- AdminLTE App -->
		<script src="/dist/js/adminlte.min.js"></script>
		<!-- AdminLTE for demo purposes -->
		<script src="/dist/js/demo.js"></script>
		<script src="/js/jQuery.print.js"></script>
		<!-- Page script -->
		<script>
			$(function() {
				//Initialize Select2 Elements
				$('.select2').select2()

				//Datemask dd/mm/yyyy
				$('#datemask').inputmask('dd/mm/yyyy', {
					'placeholder': 'dd/mm/yyyy'
				})
				//Datemask2 mm/dd/yyyy
				$('#datemask2').inputmask('mm/dd/yyyy', {
					'placeholder': 'mm/dd/yyyy'
				})
				//Money Euro
				$('[data-mask]').inputmask()

				//Date range picker
				$('#reservation').daterangepicker()
				//Date range picker with time picker
				$('#reservationtime').daterangepicker({
					timePicker: true,
					timePickerIncrement: 30,
					format: 'MM/DD/YYYY h:mm A'
				})
				//Date range as a button
				$('#daterange-btn').daterangepicker({
						ranges: {
							'Today': [moment(), moment()],
							'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
							'Last 7 Days': [moment().subtract(6, 'days'), moment()],
							'Last 30 Days': [moment().subtract(29, 'days'), moment()],
							'This Month': [moment().startOf('month'), moment().endOf('month')],
							'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
						},
						startDate: moment().subtract(29, 'days'),
						endDate: moment()
					},
					function(start, end) {
						$('#daterange-btn span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
					}
				)

				//Date picker
				$('#datepicker').datepicker({
					autoclose: true
				})

				//iCheck for checkbox and radio inputs
				$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
					checkboxClass: 'icheckbox_minimal-blue',
					radioClass: 'iradio_minimal-blue'
				})
				//Red color scheme for iCheck
				$('input[type="checkbox"].minimal-red, input[type="radio"].minimal-red').iCheck({
					checkboxClass: 'icheckbox_minimal-red',
					radioClass: 'iradio_minimal-red'
				})
				//Flat red color scheme for iCheck
				$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
					checkboxClass: 'icheckbox_flat-green',
					radioClass: 'iradio_flat-green'
				})

				//Colorpicker
				$('.my-colorpicker1').colorpicker()
				//color picker with addon
				$('.my-colorpicker2').colorpicker()

				//Timepicker
				$('.timepicker').timepicker({
					showInputs: false
				})

				new Vue({
					el:"#dcims",
					data:{
						localhost:"http://192.168.150.130:8089",
						tableData:[],
						YMD:"year",
						year:2021,
						month:0,
						day:0,
						days:31,
						total:0,
						pagesize:12,
						pages:"",
						currentPage:1,
						departments:[],
						infections:[],
						departmentNo:0,
						type:0,
						icuCheckShow:{},
						show:{
							month:false,
							day:false
						},
						user:{},
						nowDate:"",
						isLoading: true
					},
					methods: {
						getInfo: function () {
							var that = this;
							$.ajax({
								type: "post",
								url:  this.localhost+"/user/ICUMonitor",
								data: {
									year: this.year,
									month: this.month,
									day: this.day,
									departmentNo: this.departmentNo,
									type: this.type
								},
								success: function (res) {
									that.user=res.user
									that.tableData = []
									that.icuCheckShow = res.icuCheckShow
									that.departments = res.department
									that.infections = res.infection
									var tableData = res.icuCheckShow.infectionTypes
									var total = that.icuCheckShow.total1 == 0 ? 1 : that.icuCheckShow.total1
									var preTotal = that.icuCheckShow.preTotal == 0 ? 1 : that.icuCheckShow.preTotal
									var lastTotal = that.icuCheckShow.lastTotal == 0 ? 1 : that.icuCheckShow.lastTotal
									for (var key1 in tableData) {
										var value = tableData[key1]

										key1 = key1.replace(/=/g, ":")
										key1 = key1.replace("InfectionType", "")
										var item = [];
										key1 = key1.slice(0, key1.indexOf("{") + 1) + '"' + key1.slice(key1.indexOf("{") + 1, 16) + '"' + key1.slice(key1.indexOf(":"))
										key1 = key1.slice(0, key1.indexOf(",") + 1) + '"' + key1.slice(key1.lastIndexOf(",") + 2, key1.lastIndexOf(",") + 2 + 17) + '"' + key1.slice(key1.lastIndexOf(":"))

										key1 = key1.replace(/'/g, '"')
										var key = JSON.parse(key1)
										if (key.infectionTypeNo == 12){
                                            // console.log(key.infectionTypeNo)
                                            item[0] = that.infections[key.infectionTypeNo-1].infectionTypeName + "(分)"
										}else item[0] = that.infections[key.infectionTypeNo-1].infectionTypeName + "率(%)"
										item[1] = value[0] / preTotal * (100 / 100)
										item[2] = value[1] / total * (100 / 100)
										item[3] = value[1] / total - value[0] / preTotal > 0 ? "+" : "-"
										item[4] = Math.abs(value[1] / total - value[0] / preTotal)
										item[5] = value[2] / lastTotal * (100 / 100)
										item[6] = value[1] / total - value[2] / lastTotal > 0 ? "+" : "-"
										item[7] = Math.abs(value[1] / total - value[2] / lastTotal)
										that.tableData.push(item);
									}
									that.total=that.tableData.length;
									var count=that.tableData.length;
									var pages1= count/that.pagesize;
									var pages2= count%that.pagesize;
									if(that.toatl==0){
										that.pages==1
									}else{
										that.pages=pages2==0?pages1: parseInt(pages1)+1
									}
									that.isLoading=false
								},
								error: function () {

								}
							})
						},
						YMDSelected: function () {
							if (this.YMD == "year") {
								this.show.month = false;
								this.show.day = false;
								this.month=0;
								this.day=0;
							} else if (this.YMD == "month") {
								this.show.month = true;
								this.show.day = false;
								this.month=1
								this.day=0;
							} else {
								this.show.month = true;
								this.show.day = true;
								this.month=1
								this.day=1
							}
						},
						MSelected: function () {
							var dayCount;
							var now = new Date(this.year, this.month, 0);
							this.days = now.getDate();
						},
						look: function () {
							this.getInfo();
						},
						current_change:function(currentPage){
							this.currentPage = currentPage;
						},
						print: function () {
							$("#tableData").print({
								globalStyles: true,//是否包含父文档的样式，默认为true
								mediaPrint: false,//是否包含media='print'的链接标签。会被globalStyles选项覆盖，默认为false
								// stylesheet:  "static1/css/personInfo.css"  ,//外部样式表的URL地址，默认为null

								noPrintSelector: ".no-print",//不想打印的元素的jQuery选择器，默认为".no-print"
								iframe: true,//是否使用一个iframe来替代打印表单的弹出窗口，true为在本页面进行打印，false就是说新开一个页面打印，默认为true
								append: null,//  将内容添加到打印内容的后面
								prepend: null,//将内容添加到打印内容的前面，可以用来作为要打印内容
								deferred: $.Deferred()//  回调函数
							});
						},
						download: function () {

							// 使用outerHTML属性获取整个table元素的HTML代码（包括<table>标签），然后包装成一个完整的HTML文档，设置charset为urf-8以防止中文乱码
							var html = "<html><head><meta charset='utf-8' /></head><body>" + document.getElementById("tableData").outerHTML + "</body></html>";
							// 实例化一个Blob对象，其构造函数的第一个参数是包含文件内容的数组，第二个参数是包含文件类型属性的对象
							var blob = new Blob([html], {
								type: "application/vnd.ms-excel"
							});
							var a = document.createElement("a");
							// 利用URL.createObjectURL()方法为a元素生成blob URL
							a.href = URL.createObjectURL(blob);
							// 设置文件名，目前只有Chrome和FireFox支持此属性
							a.download = "ICU监测.xls";
							a.click()
							//释放内存
							window.URL.revokeObjectURL(a.href)
						},
						logout:function () {
							$.ajax({
								type: "post",
								url:  this.localhost+"/logout",
								dataType:"json",
								data: {

								},
								success: function (res) {
									if(res.code==200){
										window.location.href="http://192.168.150.130:8089/pages/login.html";
									}else{
										alert("退出失败")
									}
								}
							})
						}
					},
					created:function () {
						Date.prototype.format = function(format){
							var o = {
								"M+" : this.getMonth()+1, //month
								"d+" : this.getDate(), //day
								"h+" : this.getHours(), //hour
								"m+" : this.getMinutes(), //minute
								"s+" : this.getSeconds(), //second
								"q+" : Math.floor((this.getMonth()+3)/3), //quarter
								"S" : this.getMilliseconds() //millisecond
							}
							if(/(y+)/.test(format)) {
								format = format.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length));
							}
							for(var k in o) {
								if(new RegExp("("+ k +")").test(format)) {
									format = format.replace(RegExp.$1, RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
								}
							}
							return format;
						}
						this.nowDate=new Date().format("yyyy年MM月dd日 hh:mm:ss")
						this.getInfo();
					},
					filters: {
						numFilter (value) {
							if(typeof value =="number"){
								// 截取当前数据到小数点后两位
								let realVal = parseFloat(value).toFixed(2)
								return realVal
							}
							return value
						}
					}
				})
			})
		</script>
		<!-- AdminLTE for demo purposes -->
	</body>
</html>
